# docker-compose.yml\nversion: '3.9'\n\nservices:\n  # =========================================================================\n  # PostgreSQL Database\n  # =========================================================================\n  postgres:\n    image: pgvector/pgvector:pg15-latest\n    container_name: contentflow-postgres\n    environment:\n      POSTGRES_USER: contentflow\n      POSTGRES_PASSWORD: password\n      POSTGRES_DB: contentflow_db\n    ports:\n      - \"5432:5432\"\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U contentflow\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n    networks:\n      - contentflow\n\n  # =========================================================================\n  # FastAPI Backend\n  # =========================================================================\n  backend:\n    build:\n      context: ./backend\n      dockerfile: Dockerfile\n    container_name: contentflow-backend\n    environment:\n      DATABASE_URL: postgresql+asyncpg://contentflow:password@postgres:5432/contentflow_db\n      OPENAI_API_KEY: ${OPENAI_API_KEY}\n      ENVIRONMENT: development\n      DEBUG: \"true\"\n      LOG_LEVEL: INFO\n    ports:\n      - \"8000:8000\"\n    volumes:\n      - ./backend:/app\n    depends_on:\n      postgres:\n        condition: service_healthy\n    command: uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload\n    networks:\n      - contentflow\n\n  # =========================================================================\n  # React Frontend (optional for containerized development)\n  # =========================================================================\n  frontend:\n    build:\n      context: ./frontend\n      dockerfile: Dockerfile\n    container_name: contentflow-frontend\n    environment:\n      VITE_API_URL: http://localhost:8000/api\n    ports:\n      - \"5173:5173\"\n    volumes:\n      - ./frontend:/app\n    depends_on:\n      - backend\n    command: npm run dev\n    networks:\n      - contentflow\n\nvolumes:\n  postgres_data:\n    driver: local\n\nnetworks:\n  contentflow:\n    driver: bridge\n